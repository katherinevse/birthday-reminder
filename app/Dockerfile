FROM golang:1.18-alpine

WORKDIR /app

ENV SMTP_USERNAME ${SMTP_USERNAME}
ENV SMTP_PASSWORD ${SMTP_PASSWORD}
ENV JWT_SECRET_KEY ${JWT_SECRET_KEY}
ENV POSTGRES_PASSWORD ${POSTGRES_PASSWORD}
ENV POSTGRES_USER ${POSTGRES_USER}
ENV POSTGRES_DB ${POSTGRES_DB}
ENV DB_HOST ${DB_HOST}
ENV DB_PORT ${DB_PORT}
ENV DB_NAME ${DB_NAME}

COPY app .

RUN go build -o server ./cmd/server

CMD ["./server"]
